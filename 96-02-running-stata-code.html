
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Running Code in Stata &#8212; My sample book</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Using scan_packages.do" href="96-03-stata-scan-packages.html" />
    <link rel="prev" title="Using config.do in STATA" href="96-01-using-config-stata.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">My sample book</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="index.html">
                    Introduction
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Overview
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="01-introduction.html">
   Background
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Preliminary Tasks
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="02-01-pre-requisites.html">
   Pre-requisites
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="02-02-pre-training-tasks.html">
     Pre-training tasks {#pre-training}
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="02-03-toolkit.html">
     Toolkit
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Basics
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="04-concepts.html">
   Basic Concepts
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="05-data-citations-and-das.html">
   Data citations and data availability statements {#datacitations}
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="06-basic-flow.html">
   Generic data workflow
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="07-basic-assessing-reproducibility.html">
   Assessing computational reproducibility
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="08-details-replication-report.html">
   A guided walk through the Replication Report
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  AEA-specific training
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="11-jira-workflow-training.html">
   AEA Jira workflow - A guide
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="12-jira-revision-guidance.html">
   AEA: Revision reports after author resubmission
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="13-approving-issues.html">
   AEA: Reviewing and (Pre-) Approving Reports
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="20-Pending_ICPSR.html">
   AEA: Monitoring Pending openICPSR Changes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="30-jira-prepare-publication.html">
   AEA: Interfacing with the Journal Management System
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="40-Instructions-PandP-Checks.html">
   AEA: Instructions for Papers and Proceedings checks
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Appendix
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="91-setup-checklist.html">
   Setup Checklist {#checklist}
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="92-Privacy.html">
   Privacy {#privacy}
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="93-Communication.html">
   Communication
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="94-00-downloading-data.html">
   Downloading Data
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="94-01-how-to-use-openICPSR-backend.html">
     Using openICPSR Projects Prior to Publication
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="94-02-alternate-downloads.html">
     Alternate sources of data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="94-03-private-data.html">
     Accessing privately provided data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="94-04-Updating_Materials.html">
     Updating Replication Materials after Revisions
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="95_Access_to_computers.html">
   Access to Computers
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="95-02-codeocean.html">
     Reproducibility Checks in Codeocean
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="95-03-wholetale.html">
     Conducting reproducibility checks on WholeTale
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="95-04-codespaces.html">
     Computing using Github Codespaces
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="96-00-using-Stata.html">
   Stata-related procedures
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="96-01-using-config-stata.html">
     Using config.do in STATA
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Running Code in Stata
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="96-03-stata-scan-packages.html">
     Using scan_packages.do
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="97-00-authentication.html">
   Authentication-related issues
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="97-01-Bitbucket-authentication.html">
   Bitbucket Authentication
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="99-References.html">
   References
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/executablebooks/jupyter-book"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2F96-02-running-stata-code.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="_sources/96-02-running-stata-code.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.md</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#step-1-check-for-a-master-do-file">
   Step 1: check for a “master” .do file
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#when-a-master-do-file-is-provided">
     When a master .do file is provided
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#when-a-master-do-file-is-not-provided">
     When a master .do file is not provided
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#step-2-place-config-do-where-the-master-do-file-is-located-step2">
   Step 2: place config.do where the master .do file is located {#Step2}
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#step-3-include-config-do-in-the-master-do-file">
   Step 3: include config.do in the master .do file
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#step-4-modifying-paths-if-necessary">
   Step 4: modifying paths if necessary
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#example">
     Example
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#step-5-check-the-location-of-the-master-do-file-and-modify-config-do">
   Step 5: Check the location of the master .do file and modify config.do
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#scenario-a">
     Scenario A
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id1">
       Example
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#scenario-b">
     Scenario B
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id2">
       Example
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#step-6-run-the-code-tabset">
   Step 6: Run the Code {.tabset}
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#windows-windows-computeloc">
     Windows {#Windows .computeloc}
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#mac-linux-maclinux-computeloc-invisible">
     Mac/Linux {#MacLinux .computeloc .invisible}
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id3">
   {-}
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#checking-for-a-complete-run-debugging-and-running-the-master-in-pieces">
     Checking for a complete run, debugging and running the master in pieces
    </a>
   </li>
  </ul>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Running Code in Stata</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#step-1-check-for-a-master-do-file">
   Step 1: check for a “master” .do file
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#when-a-master-do-file-is-provided">
     When a master .do file is provided
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#when-a-master-do-file-is-not-provided">
     When a master .do file is not provided
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#step-2-place-config-do-where-the-master-do-file-is-located-step2">
   Step 2: place config.do where the master .do file is located {#Step2}
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#step-3-include-config-do-in-the-master-do-file">
   Step 3: include config.do in the master .do file
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#step-4-modifying-paths-if-necessary">
   Step 4: modifying paths if necessary
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#example">
     Example
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#step-5-check-the-location-of-the-master-do-file-and-modify-config-do">
   Step 5: Check the location of the master .do file and modify config.do
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#scenario-a">
     Scenario A
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id1">
       Example
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#scenario-b">
     Scenario B
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id2">
       Example
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#step-6-run-the-code-tabset">
   Step 6: Run the Code {.tabset}
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#windows-windows-computeloc">
     Windows {#Windows .computeloc}
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#mac-linux-maclinux-computeloc-invisible">
     Mac/Linux {#MacLinux .computeloc .invisible}
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id3">
   {-}
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#checking-for-a-complete-run-debugging-and-running-the-master-in-pieces">
     Checking for a complete run, debugging and running the master in pieces
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section id="running-code-in-stata">
<h1>Running Code in Stata<a class="headerlink" href="#running-code-in-stata" title="Permalink to this headline">#</a></h1>
<p>Although, there are plenty of ways to run code in Stata, our goal with these instructions is to show the easiest way to do it, by minimizing both the manual steps replicators have to go through and the chance of making a mistake that prevents a successful run.</p>
<p>In essence, these instructions show how to deal with the three most common actions that replicators have to undertake when running Stata code:</p>
<ol class="simple">
<li><p>Making sure that paths (i.e., something like “Mycomputer/Documents/Workspace/) in the .do files (Stata scripts) reflect the appropriate location of code, data, and output in the computer where the code is run.</p></li>
<li><p>Installing user-written functions, programs, or packages that are necessary to do computations and produce tables/figures.</p></li>
<li><p>Creating .log files (files that record, in this case, Stata output) of the replication attempts.</p></li>
</ol>
<section id="step-1-check-for-a-master-do-file">
<h2>Step 1: check for a “master” .do file<a class="headerlink" href="#step-1-check-for-a-master-do-file" title="Permalink to this headline">#</a></h2>
<blockquote>
<div><p><strong>[ACTION]</strong> Check the README or the repository and determine if a master .do file was provided.</p>
</div></blockquote>
<p>A master .do file is a Stata script that will call, in the correct sequence, all the programs necessary to construct analysis datasets, do all computations, and produce figures and tables. If a master do file exists, it should be mentioned in the README. In most cases, running a single master do file is sufficient to complete the reproduction. In general, a master script does not need to be a .do file. However, we will focus on cases where all work done in Stata is reduced to executing a single .do file.</p>
<section id="when-a-master-do-file-is-provided">
<h3>When a master .do file is provided<a class="headerlink" href="#when-a-master-do-file-is-provided" title="Permalink to this headline">#</a></h3>
<p>If there is a master do file, continue with <a class="reference external" href="#Step2">Step 2</a>.</p>
</section>
<section id="when-a-master-do-file-is-not-provided">
<h3>When a master .do file is not provided<a class="headerlink" href="#when-a-master-do-file-is-not-provided" title="Permalink to this headline">#</a></h3>
<p>If a master .do file is not provided, you should create a one.</p>
<p>To create a do file follow the following steps:</p>
<ol class="simple">
<li><p>Check that the README for specific instructions about the order in which each program is supposed to be run. If there are no such instructions, or they are not obvious by the name of the programs, is probably best to not create a master do file.</p></li>
<li><p>Assuming that the sequence of programs is clear to you, open stata and click on the “New do file editor” (you can also work on Visual Studio Code):</p></li>
</ol>
<p><img alt="do_editor" src="_images/doeditor.png" /></p>
<p>To open the do file editor:</p>
<p><img alt="do_editor2" src="_images/doeditor2.png" /></p>
<ol class="simple">
<li><p>In the first line write <code class="docutils literal notranslate"><span class="pre">include</span> <span class="pre">&quot;config.do&quot;</span></code></p></li>
<li><p>Write the command <code class="docutils literal notranslate"><span class="pre">do</span></code> and the path of each program that needs to be run. Write them in the correct sequence.</p></li>
</ol>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">include</span> <span class="s2">&quot;config.do&quot;</span>
 
<span class="o">*</span> <span class="n">Assuming</span> <span class="n">scenario</span> <span class="s2">&quot;A&quot;</span>

<span class="n">do</span> <span class="s2">&quot;$</span><span class="si">{rootdir}</span><span class="s2">/code/0_first_program.do&quot;</span> 
<span class="n">do</span> <span class="s2">&quot;$</span><span class="si">{rootdir}</span><span class="s2">/code/1_second_program.do&quot;</span>
<span class="n">do</span> <span class="s2">&quot;$</span><span class="si">{rootdir}</span><span class="s2">/code/2_third_program.do&quot;</span>
<span class="n">do</span> <span class="s2">&quot;$</span><span class="si">{rootdir}</span><span class="s2">/code/appendix_code/appendix.do&quot;</span>

</pre></div>
</div>
<ol class="simple">
<li><p>Save your master file.</p></li>
</ol>
<p>At the end your master .do file may look like this:</p>
<p><img alt="master" src="_images/master-example.png" /></p>
<p>With your master do file done, continue with <a class="reference external" href="#Step2">Step 2</a>.</p>
</section>
</section>
<section id="step-2-place-config-do-where-the-master-do-file-is-located-step2">
<h2>Step 2: place <a class="reference external" href="http://config.do">config.do</a> where the master .do file is located {#Step2}<a class="headerlink" href="#step-2-place-config-do-where-the-master-do-file-is-located-step2" title="Permalink to this headline">#</a></h2>
<blockquote>
<div><p><strong>[ACTION]</strong> Copy the file <a class="reference external" href="https://github.com/AEADataEditor/replication-template/blob/master/template-config.do"><code class="docutils literal notranslate"><span class="pre">template-config.do</span></code></a> and paste it into the folder where the master file is located. Change the name from <code class="docutils literal notranslate"><span class="pre">template-config.do</span></code> to <code class="docutils literal notranslate"><span class="pre">config.do</span></code></p>
</div></blockquote>
<p>The folder with the code, whether is the root directory or a subfolder, should look something like this:</p>
<p><img alt="Code_Repository" src="_images/code_repo.png" /></p>
</section>
<section id="step-3-include-config-do-in-the-master-do-file">
<h2>Step 3: include <a class="reference external" href="http://config.do">config.do</a> in the master .do file<a class="headerlink" href="#step-3-include-config-do-in-the-master-do-file" title="Permalink to this headline">#</a></h2>
<blockquote>
<div><p><strong>[ACTION]</strong> Open the master .do file. In the beginning, add the line:</p>
</div></blockquote>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">1</span> <span class="n">include</span> <span class="s2">&quot;config.do&quot;</span>
<span class="mi">2</span>
<span class="mi">3</span> <span class="o">/*</span> <span class="n">This</span> <span class="ow">is</span> <span class="n">Master</span> <span class="n">do</span> <span class="n">file</span> <span class="o">*/</span>
</pre></div>
</div>
<blockquote>
<div><p>Save.</p>
</div></blockquote>
<p>More information about <code class="docutils literal notranslate"><span class="pre">config.do</span></code> can be found in <a class="reference external" href="https://labordynamicsinstitute.github.io/replicability-training-curriculum/using-config-do-in-stata.html">Appendix F</a> of the training materials.</p>
<p>In summary, <code class="docutils literal notranslate"><span class="pre">config.do</span></code> does 4 things:</p>
<ul class="simple">
<li><p>Creates a global variable called “rootdir” with the local path to the root directory.</p></li>
<li><p>Creates a logs files.</p></li>
<li><p>Sets a path to save the packages to be installed in the replication repository, and</p></li>
<li><p>It allows you to install the packages simply by listing their names.</p></li>
</ul>
<p>A crucial function of <code class="docutils literal notranslate"><span class="pre">config.do</span></code> is that it allows for the local installation of Stata packages, which is important for two reasons. First, it will enable us to check for the completeness of replication materials. Second, when running code in servers, we often do not have the necessary permissions to install Stata packages freely.<code class="docutils literal notranslate"><span class="pre">config.do</span></code> allow us to installed packages in the replication directory.</p>
</section>
<section id="step-4-modifying-paths-if-necessary">
<h2>Step 4: modifying paths if necessary<a class="headerlink" href="#step-4-modifying-paths-if-necessary" title="Permalink to this headline">#</a></h2>
<blockquote>
<div><p><strong>[ACTION]</strong></p>
<ul class="simple">
<li><p>Check the Readme and determine if (and where) the root directory should be modified.</p></li>
<li><p>Open the .do file to be modified (probably the master .do file) and set the global variable <code class="docutils literal notranslate"><span class="pre">$rootdir</span></code> as the path.</p></li>
<li><p>Save.</p></li>
</ul>
</div></blockquote>
<p>To run the code, we need to make sure that Stata can access the locally-saved data, access the packages that will be installed, and save the output in the computer where you are running the code. To do that, we often need to change some directory paths defined in the .do files provided. This step may vary in each replication package, so you need to look at the README instructions closely. Some packages may not require any change, while others may require a little more work.</p>
<p>However, the typical case will only require one modification, either to the master .do file or to a program called by the master .do file, where you define the path of the location of the replication package. This location is what we refer to as the “root directory”. Once this change is made, the code provided (if it follows good practices) will define every other path relative to the root directory.</p>
<section id="example">
<h3>Example<a class="headerlink" href="#example" title="Permalink to this headline">#</a></h3>
<p>In the author’s master file, a global variable “maindir” defines the path of the root directory as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/*</span> <span class="n">This</span> <span class="ow">is</span> <span class="n">Master</span> <span class="n">do</span> <span class="n">file</span> <span class="o">*/</span>

<span class="k">global</span> <span class="n">maindir</span> <span class="s2">&quot;C:\Users\Author\Dropbox\Project1&quot;</span> <span class="o">//</span> <span class="n">this</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">path</span> <span class="n">to</span> <span class="n">the</span> <span class="n">repository</span>
<span class="k">global</span> <span class="n">data</span> <span class="s2">&quot;$maindir/data&quot;</span> <span class="o">//</span> <span class="n">path</span> <span class="n">to</span> <span class="n">data</span> <span class="n">folder</span>
<span class="k">global</span> <span class="n">figures</span> <span class="s2">&quot;$maindir/figures&quot;</span> <span class="o">//</span> <span class="n">path</span> <span class="n">to</span> <span class="n">figures</span> <span class="n">folder</span>
</pre></div>
</div>
<p>You would add <code class="docutils literal notranslate"><span class="pre">config.do</span></code> and change the global.
After the change:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">include</span> <span class="s2">&quot;config.do&quot;</span>

<span class="o">/*</span> <span class="n">This</span> <span class="ow">is</span> <span class="n">Master</span> <span class="n">do</span> <span class="n">file</span> <span class="o">*/</span>

<span class="k">global</span> <span class="n">maindir</span> <span class="s2">&quot;$rootdir&quot;</span> <span class="o">//</span> <span class="n">this</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">path</span> <span class="n">to</span> <span class="n">the</span> <span class="n">repository</span>
<span class="k">global</span> <span class="n">data</span> <span class="s2">&quot;$maindir/data&quot;</span> <span class="o">//</span> <span class="n">path</span> <span class="n">to</span> <span class="n">data</span> <span class="n">folder</span>
<span class="k">global</span> <span class="n">figures</span> <span class="s2">&quot;$maindir/figures&quot;</span> <span class="o">//</span> <span class="n">path</span> <span class="n">to</span> <span class="n">figures</span> <span class="n">folder</span>
</pre></div>
</div>
</section>
</section>
<section id="step-5-check-the-location-of-the-master-do-file-and-modify-config-do">
<h2>Step 5: Check the location of the master .do file and modify <a class="reference external" href="http://config.do">config.do</a><a class="headerlink" href="#step-5-check-the-location-of-the-master-do-file-and-modify-config-do" title="Permalink to this headline">#</a></h2>
<blockquote>
<div><p><strong>[ACTION]</strong></p>
<ul class="simple">
<li><p>If the master .do file is directly placed in the root directory, set the parameter <code class="docutils literal notranslate"><span class="pre">scenario</span></code> to be <code class="docutils literal notranslate"><span class="pre">B</span></code> and save.</p></li>
<li><p>If the master .do file is inside a folder, open <code class="docutils literal notranslate"><span class="pre">config.do</span></code> and set the parameter <code class="docutils literal notranslate"><span class="pre">scenario</span></code> to <code class="docutils literal notranslate"><span class="pre">A</span></code> and save. (This is the default, so really no action is necessary.)</p></li>
<li><p>If the replication package includes a folder with Stata packages, add the line  <code class="docutils literal notranslate"><span class="pre">adopath</span> <span class="pre">++</span></code> followed by the path of the location of that folder and save. See <a class="reference external" href="https://labordynamicsinstitute.github.io/replicability-training-curriculum/using-config-do-in-stata.html">Appendix F</a> for details.</p></li>
<li><p>Add packages that need to be installed to <a class="reference external" href="http://config.do">config.do</a>. See <a class="reference external" href="https://labordynamicsinstitute.github.io/replicability-training-curriculum/using-config-do-in-stata.html">Appendix F</a> for details.</p></li>
</ul>
</div></blockquote>
<section id="scenario-a">
<h3>Scenario A<a class="headerlink" href="#scenario-a" title="Permalink to this headline">#</a></h3>
<p>A simplified directory structure that correspond with scenario “A” look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">directory</span><span class="o">/</span>
              <span class="n">code</span><span class="o">/</span>
                 <span class="n">main</span><span class="o">.</span><span class="n">do</span>
                 <span class="mi">01</span><span class="n">_dosomething</span><span class="o">.</span><span class="n">do</span>
              <span class="n">data</span><span class="o">/</span>
                 <span class="n">data</span><span class="o">.</span><span class="n">dta</span>
                 <span class="n">otherdata</span><span class="o">.</span><span class="n">dta</span>

</pre></div>
</div>
<section id="id1">
<h4>Example<a class="headerlink" href="#id1" title="Permalink to this headline">#</a></h4>
<ul class="simple">
<li><p>A Master .do file is  inside a folder and you have placed <code class="docutils literal notranslate"><span class="pre">config.do</span></code> in that same folder. The package <code class="docutils literal notranslate"><span class="pre">estout</span></code> needs to be installed:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">*</span> <span class="n">Template</span> <span class="n">config</span><span class="o">.</span><span class="n">do</span> <span class="o">*/</span>

<span class="n">local</span> <span class="n">scenario</span> <span class="s2">&quot;A&quot;</span> 
<span class="o">*</span> <span class="o">***</span> <span class="n">Add</span> <span class="n">required</span> <span class="n">packages</span> <span class="kn">from</span> <span class="nn">SSC</span> <span class="n">to</span> <span class="n">this</span> <span class="nb">list</span> <span class="o">***</span>
<span class="n">local</span> <span class="n">ssc_packages</span> <span class="s2">&quot;estout ivreg2&quot;</span>
    <span class="o">//</span> <span class="n">Example</span><span class="p">:</span>
    <span class="o">//</span> <span class="n">local</span> <span class="n">ssc_packages</span> <span class="s2">&quot;estout boottest&quot;</span>
    <span class="o">//</span> <span class="n">If</span> <span class="n">you</span> <span class="n">need</span> <span class="n">to</span> <span class="s2">&quot;net install&quot;</span> <span class="n">packages</span><span class="p">,</span> <span class="n">go</span> <span class="n">to</span> <span class="n">the</span> <span class="n">very</span> <span class="n">end</span> <span class="n">of</span> <span class="n">this</span> <span class="n">program</span><span class="p">,</span> <span class="ow">and</span> <span class="n">add</span> <span class="n">them</span> <span class="n">there</span><span class="o">.</span>
</pre></div>
</div>
</section>
</section>
<section id="scenario-b">
<h3>Scenario B<a class="headerlink" href="#scenario-b" title="Permalink to this headline">#</a></h3>
<p>A simplified directory structure that correspond to scenario “B” looks like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">directory</span><span class="o">/</span>
        <span class="n">main</span><span class="o">.</span><span class="n">do</span>
        <span class="n">scripts</span><span class="o">/</span>
             <span class="mi">01</span><span class="n">_dosomething</span><span class="o">.</span><span class="n">do</span>
        <span class="n">data</span><span class="o">/</span>
             <span class="n">data</span><span class="o">.</span><span class="n">dta</span>
             <span class="n">otherdata</span><span class="o">.</span><span class="n">dta</span>
</pre></div>
</div>
<section id="id2">
<h4>Example<a class="headerlink" href="#id2" title="Permalink to this headline">#</a></h4>
<ul class="simple">
<li><p>A Master .do file is in the main directory, and you have placed <code class="docutils literal notranslate"><span class="pre">config.do</span></code> in the main directory. The package <code class="docutils literal notranslate"><span class="pre">estout</span></code> and <code class="docutils literal notranslate"><span class="pre">ivreg2</span></code> need to be installed:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/*</span> <span class="n">Template</span> <span class="n">config</span><span class="o">.</span><span class="n">do</span> <span class="o">*/</span>

<span class="n">local</span> <span class="n">scenario</span> <span class="s2">&quot;B&quot;</span>  <span class="o">//</span> <span class="n">around</span> <span class="n">line</span> <span class="mi">30</span>
<span class="o">***</span> <span class="n">Add</span> <span class="n">required</span> <span class="n">packages</span> <span class="kn">from</span> <span class="nn">SSC</span> <span class="n">to</span> <span class="n">this</span> <span class="nb">list</span> <span class="o">***</span>
<span class="n">local</span> <span class="n">ssc_packages</span> <span class="s2">&quot;estout&quot;</span>
    <span class="o">//</span> <span class="n">Example</span><span class="p">:</span>
    <span class="o">//</span> <span class="n">local</span> <span class="n">ssc_packages</span> <span class="s2">&quot;estout boottest&quot;</span>
    <span class="o">//</span> <span class="n">If</span> <span class="n">you</span> <span class="n">need</span> <span class="n">to</span> <span class="s2">&quot;net install&quot;</span> <span class="n">packages</span><span class="p">,</span> <span class="n">go</span> <span class="n">to</span> <span class="n">the</span> <span class="n">very</span> <span class="n">end</span> <span class="n">of</span> <span class="n">this</span> <span class="n">program</span><span class="p">,</span> <span class="ow">and</span> <span class="n">add</span> <span class="n">them</span> <span class="n">there</span><span class="o">.</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="step-6-run-the-code-tabset">
<h2>Step 6: Run the Code {.tabset}<a class="headerlink" href="#step-6-run-the-code-tabset" title="Permalink to this headline">#</a></h2>
<div class="w3-bar w3-black">
  <button class="w3-bar-item w3-button" onclick="openTab('Windows')">Windows</button>
  <button class="w3-bar-item w3-button" onclick="openTab('MacLinux')">Mac/Linux</button>
</div> 
<section id="windows-windows-computeloc">
<h3>Windows {#Windows .computeloc}<a class="headerlink" href="#windows-windows-computeloc" title="Permalink to this headline">#</a></h3>
<blockquote>
<div><p><strong>[ACTION]</strong> <strong>Right click</strong> on the master .do file and select the option <code class="docutils literal notranslate"><span class="pre">Execute</span> <span class="pre">(do)</span></code>.</p>
</div></blockquote>
<p><img alt="execute do" src="_images/execute-do.png" /></p>
<p>This option will set the working directory  to the location where the <code class="docutils literal notranslate"><span class="pre">master.do</span></code> is. It opens Stata and will show the processes in the Stata window.</p>
</section>
<section id="mac-linux-maclinux-computeloc-invisible">
<h3>Mac/Linux {#MacLinux .computeloc .invisible}<a class="headerlink" href="#mac-linux-maclinux-computeloc-invisible" title="Permalink to this headline">#</a></h3>
<p>On Unix-style systems, the preferred way is to use the command line to run Stata code.</p>
<blockquote>
<div><p>Mac-specific one-time setup: Open Stata on your Mac, go to the “Stata” tab at the top of your screen and click “<code class="docutils literal notranslate"><span class="pre">Install</span> <span class="pre">Terminal</span> <span class="pre">Utility…</span></code>”</p>
</div></blockquote>
<p>Open up a terminal in the folder where the <code class="docutils literal notranslate"><span class="pre">master.do</span></code> file is located - this may differ depending on your system, and may involve using “<code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">/path/to/code</span></code>” commands. Confirm with “<code class="docutils literal notranslate"><span class="pre">ls</span></code>” that you see the same files you might see in Finder / File Explorer. Refer to the command line training in the initial training.</p>
<p>Identify which Stata version you have installed (some systems have only one, some have multiple):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">which</span> <span class="n">stata</span>
<span class="n">which</span> <span class="n">stata</span><span class="o">-</span><span class="n">se</span>
<span class="n">which</span> <span class="n">stata</span><span class="o">-</span><span class="n">mp</span>
</pre></div>
</div>
<p>Each version is increasingly powerful. Choose the most powerful one installed on your system. (We will assume that you have <code class="docutils literal notranslate"><span class="pre">stata-mp</span></code> but adjust accordingly)</p>
<p>Then  type “<code class="docutils literal notranslate"><span class="pre">stata-mp</span> <span class="pre">-b</span> <span class="pre">do</span> <span class="pre">master.do</span></code>”.</p>
</section>
</section>
<section id="id3">
<h2>{-}<a class="headerlink" href="#id3" title="Permalink to this headline">#</a></h2>
<section id="checking-for-a-complete-run-debugging-and-running-the-master-in-pieces">
<h3>Checking for a complete run, debugging and running the master in pieces<a class="headerlink" href="#checking-for-a-complete-run-debugging-and-running-the-master-in-pieces" title="Permalink to this headline">#</a></h3>
<p>After running the code, the log files will need to be checked for a complete run. <strong>Use Visual Studio Code to open and inspect log files</strong>. Any bugs that prevents a complete run will also show up in the log files.</p>
<p>If a you find a bug that is simple enough to fix, you can make changes to the do files. Then,  you can right click on the master file and select <code class="docutils literal notranslate"><span class="pre">Execute</span> <span class="pre">(do)</span></code> as this option will open Stata, allowing to run the code interactively.</p>
<p>If you decide the code needs to be run in pieces. In the master .do file, you can comment out (using the symbol *) the programs that are not to be run and save the master. Then, you can right click on the master and select the option ``Execute (do)`.</p>
<p>When debugging is complete, you can uncomment all programs in the master and make a clean run, using again <code class="docutils literal notranslate"><span class="pre">Execute</span> <span class="pre">Quietly</span> <span class="pre">(run)</span></code>.</p>
<blockquote>
<div><p>Consider how much time a complete run would take before you run everything one last time. If it would take too long, you may want to skip a complete run, but ensure that you have log files for all partial runs.</p>
</div></blockquote>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="96-01-using-config-stata.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Using config.do in STATA</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="96-03-stata-scan-packages.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Using scan_packages.do</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By The Jupyter Book Community<br/>
  
      &copy; Copyright 2022.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>